{"version":3,"file":"kanbanparent.min.js","sources":["../src/kanbanparent.js"],"sourcesContent":["import {BaseComponent} from 'core/reactive';\nimport exporter from 'mod_kanban/exporter';\nimport Log from 'core/log';\n\n/**\n * Parent component for all kanban boards of this cmid.\n */\nexport default class extends BaseComponent {\n    /**\n     * Function to initialize component, called by mustache template.\n     * @param {*} target The id of the HTMLElement to attach to\n     * @param {*} reactiveInstance The reactive instance for the component\n     * @returns {BaseComponent} New component attached to the HTMLElement represented by target\n     */\n    static init(target, reactiveInstance) {\n        return new this({\n            element: document.getElementById(target),\n            reactive: reactiveInstance,\n        });\n    }\n\n    /**\n     * Called after the component was created.\n     */\n    create() {\n        this.cmid = this.element.dataset.cmid;\n        this.id = this.element.dataset.id;\n        // Optional cardid parameter. If it contains a valid id the related card will be highlighted on load.\n        this.cardid = this.element.dataset.cardid;\n    }\n\n    /**\n     * Called once when state is ready, attaching event listeners and initializing drag and drop.\n     * @param {*} state The initial state\n     */\n    async stateReady(state) {\n        this.subcomponent = await this.renderComponent(\n            this.getElement(),\n            'mod_kanban/board',\n            exporter.exportStateForTemplate(state),\n        ).then(() => {\n            if (this.cardid) {\n                this.reactive.dispatch('setHighlightedCard', this.cardid);\n            }\n            return true;\n        }).catch(error => {\n            Log.debug(error);\n        });\n    }\n}"],"names":["BaseComponent","target","reactiveInstance","this","element","document","getElementById","reactive","create","cmid","dataset","id","cardid","state","subcomponent","renderComponent","getElement","exporter","exportStateForTemplate","then","dispatch","catch","error","debug"],"mappings":"kZAO6BA,oCAObC,OAAQC,yBACT,IAAIC,KAAK,CACZC,QAASC,SAASC,eAAeL,QACjCM,SAAUL,mBAOlBM,cACSC,KAAON,KAAKC,QAAQM,QAAQD,UAC5BE,GAAKR,KAAKC,QAAQM,QAAQC,QAE1BC,OAAST,KAAKC,QAAQM,QAAQE,wBAOtBC,YACRC,mBAAqBX,KAAKY,gBAC3BZ,KAAKa,aACL,mBACAC,kBAASC,uBAAuBL,QAClCM,MAAK,KACChB,KAAKS,aACAL,SAASa,SAAS,qBAAsBjB,KAAKS,SAE/C,KACRS,OAAMC,qBACDC,MAAMD"}