{"version":3,"file":"filters.min.js","sources":["../src/filters.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Filter the cards of a kanban board.\n *\n * @module     mod_kanban/filters\n * @copyright  2025 ISB Bayern\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n/**\n * Initialize the filter for the kanban board.\n * @param {number} id The board id\n */\nexport const filters = (id) => {\n    const searchinput = document.querySelector(`input[name=\"mod_kanban_filter_search-${id}\"]`);\n    if (!searchinput) {\n        return;\n    }\n\n    searchinput.addEventListener('input', function(event) {\n        const input = event.target.closest('input');\n        const searchterm = input.value.trim().toLowerCase();\n        const board = input.closest('.mod_kanban_board');\n        if (!board) {\n            return;\n        }\n        const cards = board.querySelectorAll('.mod_kanban_card');\n        cards.forEach((card) => {\n            const title = card.querySelector('.mod_kanban_card_title');\n            if (!title) {\n                return;\n            }\n            const titletext = title.textContent.trim().toLowerCase();\n            if (titletext.includes(searchterm)) {\n                card.classList.remove('mod_kanban_card_hidden');\n            } else {\n                card.classList.add('mod_kanban_card_hidden');\n            }\n        });\n    });\n\n    const closebutton = document.querySelector(`a[data-action=\"closesearch\"]`);\n    if (closebutton) {\n        closebutton.addEventListener('click', function() {\n            if (searchinput) {\n                searchinput.value = '';\n                const board = searchinput.closest('.mod_kanban_board');\n                if (!board) {\n                    return;\n                }\n                const cards = board.querySelectorAll('.mod_kanban_card');\n                cards.forEach((card) => {\n                    card.classList.remove('mod_kanban_card_hidden');\n                });\n            }\n        });\n    }\n};\n\n"],"names":["id","searchinput","document","querySelector","addEventListener","event","input","target","closest","searchterm","value","trim","toLowerCase","board","querySelectorAll","forEach","card","title","textContent","includes","classList","remove","add","closebutton"],"mappings":"6JA2BwBA,WACdC,YAAcC,SAASC,6DAAsDH,cAC9EC,mBAILA,YAAYG,iBAAiB,SAAS,SAASC,aACrCC,MAAQD,MAAME,OAAOC,QAAQ,SAC7BC,WAAaH,MAAMI,MAAMC,OAAOC,cAChCC,MAAQP,MAAME,QAAQ,yBACvBK,aAGSA,MAAMC,iBAAiB,oBAC/BC,SAASC,aACLC,MAAQD,KAAKb,cAAc,8BAC5Bc,aAGaA,MAAMC,YAAYP,OAAOC,cAC7BO,SAASV,YACnBO,KAAKI,UAAUC,OAAO,0BAEtBL,KAAKI,UAAUE,IAAI,sCAKzBC,YAAcrB,SAASC,8CACzBoB,aACAA,YAAYnB,iBAAiB,SAAS,cAC9BH,YAAa,CACbA,YAAYS,MAAQ,SACdG,MAAQZ,YAAYO,QAAQ,yBAC7BK,aAGSA,MAAMC,iBAAiB,oBAC/BC,SAASC,OACXA,KAAKI,UAAUC,OAAO"}