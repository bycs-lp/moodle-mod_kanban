{"version":3,"file":"filters.min.js","sources":["../src/filters.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\nimport {debounce} from 'core/utils';\nimport KanbanComponent from 'mod_kanban/kanbancomponent';\n\n/**\n * Filter the cards of a kanban board.\n *\n * @module     mod_kanban/filters\n * @copyright  2025 ISB Bayern\n * @author     Stefan Hanauska <stefan.hanauska@csg-in.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nexport default class extends KanbanComponent {\n    /**\n     * Function to initialize component, called by mustache template.\n     * @param {*} target The id of the HTMLElement to attach to\n     * @returns {BaseComponent} New component attached to the HTMLElement represented by target\n     */\n    static init(target) {\n        let element = document.getElementById(target);\n        return new this({\n            element: element,\n        });\n    }\n\n    /**\n     * Called after the component was created.\n     */\n    create() {\n        this.id = this.element.dataset.id;\n    }\n\n    /**\n     * Called once when state is ready (also if component is registered after initial state was set), attaching event listeners.\n     */\n    stateReady() {\n        const searchinput = this.getElement();\n        this.addEventListener(this.getElement(), 'input', debounce((event) => {\n            const input = event.target.closest('input');\n            const searchterm = input.value.trim().toLowerCase();\n            const board = input.closest('.mod_kanban_board');\n            if (!board) {\n                return;\n            }\n            this.reactive.dispatch('updateFilter', {type: 'title', value: searchterm});\n        }, 500));\n\n        const closebutton = this.getElement().parentElement.querySelector(`a[data-action=\"closesearch\"]`);\n        if (closebutton) {\n            this.addEventListener(closebutton, 'click', () => {\n                searchinput.value = '';\n                this.reactive.dispatch('removeFilter', {type: 'title'});\n            });\n        }\n    }\n}\n"],"names":["KanbanComponent","target","this","element","document","getElementById","create","id","dataset","stateReady","searchinput","getElement","addEventListener","event","input","closest","searchterm","value","trim","toLowerCase","reactive","dispatch","type","closebutton","parentElement","querySelector"],"mappings":";;;;;;;;sLA2B6BA,qCAMbC,eAED,IAAIC,KAAK,CACZC,QAFUC,SAASC,eAAeJ,UAS1CK,cACSC,GAAKL,KAAKC,QAAQK,QAAQD,GAMnCE,mBACUC,YAAcR,KAAKS,kBACpBC,iBAAiBV,KAAKS,aAAc,SAAS,oBAAUE,cAClDC,MAAQD,MAAMZ,OAAOc,QAAQ,SAC7BC,WAAaF,MAAMG,MAAMC,OAAOC,cACxBL,MAAMC,QAAQ,2BAIvBK,SAASC,SAAS,eAAgB,CAACC,KAAM,QAASL,MAAOD,eAC/D,YAEGO,YAAcrB,KAAKS,aAAaa,cAAcC,8CAChDF,kBACKX,iBAAiBW,YAAa,SAAS,KACxCb,YAAYO,MAAQ,QACfG,SAASC,SAAS,eAAgB,CAACC,KAAM"}